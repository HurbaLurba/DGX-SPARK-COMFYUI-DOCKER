---
# ComfyUI Native Installation Configuration
# These variables can be customized for your environment

# Installation paths
comfyui_install_dir: "/opt/comfyui"
comfyui_app_dir: "{{ comfyui_install_dir }}/ComfyUI"
venv_path: "{{ comfyui_install_dir }}/venv"

# Multi-user configuration
comfyui_group: "comfyui-users"
comfyui_users: []  # Add usernames here, e.g., ["user1", "user2"]
comfyui_permissions: "0775"

# Python configuration
python_version: "3.12"
pytorch_version: "2.9.1"
pytorch_index_url: "https://download.pytorch.org/whl/cu130"

# CUDA configuration
cuda_home: "/usr/local/cuda-13.0"
cuda_arch_list: "12.1"  # For Blackwell GPUs. Adjust for your GPU architecture

# ComfyUI service configuration
service_name: "comfyui"
service_port: 8188
service_user: "root"
service_group: "root"

# ComfyUI startup flags
comfyui_flags:
  - "--listen 0.0.0.0"
  - "--port {{ service_port }}"
  - "--disable-xformers"
  - "--use-sage-attention"
  - "--gpu-only"
  - "--bf16-unet"
  - "--bf16-vae"
  - "--bf16-text-enc"

# Environment variables for ComfyUI runtime and build
comfyui_env_vars:
  TOKENIZERS_PARALLELISM: "false"
  CUDA_MANAGED_FORCE_DEVICE_ALLOC: "0"
  CUDA_CACHE_DISABLE: "1"
  CUDA_AUTO_BOOST: "1"
  CUDA_AUTO_BOOST_DEFAULT: "1"
  CUDA_DEVICE_MAX_COPY_CONNECTIONS: "32"
  CUDA_DEVICE_MAX_CONNECTIONS: "32"
  CUDA_LAUNCH_BLOCKING: "0"
  TORCH_ALLOW_TF32_CUBLAS_OVERRIDE: "1"
  CUDA_MODULE_LOADING: "EAGER"
  HF_HUB_DISABLE_TELEMETRY: "1"
  NVIDIA_TF32_OVERRIDE: "1"
  TORCH_USE_CUDA_DSA: "1"
  TORCHDYNAMO_DISABLE: "1"
  NVIDIA_VISIBLE_DEVICES: "0,1,2,3,4,5,6,7"
  CUDA_VISIBLE_DEVICES: "0,1,2,3,4,5,6,7"
  PYTHONUNBUFFERED: "1"
  PYTHONDONTWRITEBYTECODE: "1"
  PYTHONWARNINGS: "ignore"
  CUBLAS_WORKSPACE_CONFIG: ":0:0"

# NFS mount paths (set to empty strings if not using NFS)
nfs_models_path: "/mnt/comfy_model_share/comfy/models"
nfs_input_path: "/mnt/comfy_temp_share/ComfyUI/input"
nfs_output_path: "/mnt/comfy_temp_share/ComfyUI/output"

# Package versions (optional - leave empty for latest)
onnxruntime_version: ""
torchao_version: ""
flash_attn_version: ""
sageattention_version: ""
python_dotenv_version: ""
psutil_version: ""
torchsde_version: ""

# ComfyUI repository
comfyui_repo_url: "https://github.com/comfyanonymous/ComfyUI"
comfyui_branch: "master"

# Custom nodes to install (add/remove as needed)
custom_nodes:
  - "https://github.com/ltdrdata/ComfyUI-Manager"
  - "https://github.com/ltdrdata/ComfyUI-Impact-Pack"
  - "https://github.com/ltdrdata/ComfyUI-Impact-Subpack"
  - "https://github.com/Fannovel16/comfyui_controlnet_aux"
  - "https://github.com/jags111/ComfyUI_Jags_VectorMagic"
  - "https://github.com/pythongosssss/ComfyUI-Custom-Scripts"
  - "https://github.com/WASasquatch/was-node-suite-comfyui"
  - "https://github.com/cubiq/ComfyUI_essentials"
  - "https://github.com/EllangoK/ComfyUI-post-processing-nodes"
  - "https://github.com/FizzleDorf/ComfyUI_FizzNodes"
  - "https://github.com/Kosinkadink/ComfyUI-Advanced-ControlNet"
  - "https://github.com/Kosinkadink/ComfyUI-VideoHelperSuite"
  - "https://github.com/rgthree/rgthree-comfy"
  - "https://github.com/hirad/comfyui-reactor-node"
  - "https://github.com/kijai/ComfyUI-Florence2"
  - "https://github.com/Acly/comfyui-tooling-nodes"
  - "https://github.com/yolain/ComfyUI-Easy-Use"
  - "https://github.com/city96/ComfyUI-GGUF"
  - "https://github.com/city96/ComfyUI_ExtraModels"
  - "https://github.com/giriss/comfy-image-saver"
  - "https://github.com/shiimizu/ComfyUI_smZNodes"
  - "https://github.com/ZHO-ZHO-ZHO/ComfyUI-BRIA_AI-RMBG"
  - "https://github.com/pythongosssss/ComfyUI-WD14-Tagger"
  - "https://github.com/spacepxl/ComfyUI-Image-Filters"
  - "https://github.com/ssitu/ComfyUI_UltimateSDUpscale"
  - "https://github.com/cubiq/ComfyUI_IPAdapter_plus"
  - "https://github.com/TinyTerra/ComfyUI_tinyterraNodes"
  - "https://github.com/TTPlanetPig/Comfyui_Object_Migration"
  - "https://github.com/melMass/comfy_mtb"
  - "https://github.com/Kosinkadink/ComfyUI-AnimateDiff-Evolved"
  - "https://github.com/kijai/ComfyUI-KJNodes"
  - "https://github.com/crystian/ComfyUI-Crystools"
  - "https://github.com/comfyanonymous/ComfyUI_experiments"
  - "https://github.com/11cafe/comfyui-workspace-manager"
